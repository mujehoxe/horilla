{% load i18n %} {% include "filter_tags.html" %}
<div class="d-flex flex-row-reverse oh-wrapper mb-2">
    <span
        class="me-3"
        onclick="$('[name=status]').val('canceled').change();  $('.filterButton').click()"
        style="cursor: pointer; margin-right: 15px"
    >
        <span
            class="oh-dot oh-dot--small me-1"
            style="background-color: red"
        ></span>
        {% trans "Canceled" %}
    </span>
    <span
        class="me-3"
        onclick="$('[name=status]').val('approved').change();$('.filterButton').click()"
        style="cursor: pointer; margin-right: 15px"
    >
        <span
            class="oh-dot oh-dot--small me-1"
            style="background-color: yellowgreen"
        ></span>
        {% trans "Approved" %}
    </span>
    <span
        class="me-3"
        onclick="$('[name=status]').val('requested').change(); $('.filterButton').click()"
        style="cursor: pointer; margin-right: 15px"
    >
        <span
            class="oh-dot oh-dot--small me-1"
            style="background-color: rgba(128, 128, 128, 0.482)"
        ></span>
        {% trans "Requested" %}
    </span>
    
</div>

<div class="oh-tabs oh-wrapper">
    <ul class="oh-tabs__tablist">
        <li class="oh-tabs__tab" data-target="#reimbursement_tab">
            {% trans "Reimbursements" %}
        </li>
        <!-- normal user can't view all objective  -->
        <li class="oh-tabs__tab" data-target="#leave_encashment_tab">
            {% trans "Leave encashments" %}
        </li>
        <li class="oh-tabs__tab" data-target="#bonus_encashment_tab">
            {% trans "Bonus Encashments" %}
        </li>
    </ul>
    <div>
        <div class="oh-tabs__contents">
            <!-- Reimbursement-->
            <div class="oh-tabs__content" id="reimbursement_tab">
                <div class="oh-sticky-table">
                    <div class="oh-sticky-table__table oh-table--sortable">
                        <div class="oh-sticky-table__thead">
                            <div class="oh-sticky-table__tr">
                                {% comment %} <div class="oh-sticky-table__th" style="width: 20px">
                                    <input
                                      type="checkbox"
                                      title='{% trans "Select All" %}'
                                      class="oh-input oh-input__checkbox mt-1 mr-2 all-attendances"
                                      style="margin-left: -5px"
                                    />
                                </div> {% endcomment %}
                                <div
                                  class="oh-sticky-table__th"
                                  hx-get=""
                                  hx-target="#tab_contents"
                                  >
                                  {% trans "Employee" %}
                                </div>
                                <div
                                  class="oh-sticky-table__th "
                                  hx-get=""
                                  hx-target="#tab_contents"
                                  >
                                  {% trans "Date" %}
                                </div>
                                <div class="oh-sticky-table__th">{% trans "title" %}</div>
                                <div class="oh-sticky-table__th">{% trans "Amount" %}</div>
                                <div class="oh-sticky-table__th">{% trans "Status" %}</div>
                                <div
                                  class="oh-sticky-table__th" style="width:200px"
                                  hx-get=""
                                  hx-target="#tab_contents"
                                  >
                                  {% trans "description" %}
                                </div>
                                
                                <div class="oh-sticky-table__th"></div>
                                <div class="oh-sticky-table__th"></div>
                                <div class="oh-sticky-table__th"> {% trans "Actions" %} </div>
                            </div>
                        </div>
                        <div class="oh-sticky-table__tbody">
                            {% for req in reimbursements %}
                                <form
                                    action="{% url 'approve-reimbursements' %}"
                                    class="oh-sticky-table__tr"
                                    id="requestCard{{ req.id }}"
                                >
                                    {% comment %} <div class="oh-sticky-table__sd" onclick="event.stopPropagation();">
                                      <input
                                        type="checkbox"
                                        id="{{attendance.id}}"
                                        class="oh-input attendance-checkbox oh-input__checkbox mt-2 mr-2 all-attendance-row"
                                      />
                                    </div> {% endcomment %}
                                    <div class="oh-sticky-table__sd">
                                        <div class="d-flex">
                                            <div class="oh-profile oh-profile--md">
                                                <div class="oh-profile__avatar mr-1">
                                                    <img
                                                      src="{{req.employee_id.get_avatar}}"
                                                      class="oh-profile__image"
                                                      alt=""
                                                    />
                                                </div>
                                                <span class="oh-profile__name oh-text--dark">{{req.employee_id}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="oh-sticky-table__td dateformat_changer">{{req.created_at|date:"F j, Y"}}</div>
                                    <div class="oh-sticky-table__td">
                                      {{req.title|truncatechars:20 }}
                                    </div>
                                    <div class="oh-sticky-table__td">
                                      {{req.amount}}
                                    </div>
                                    <div class="oh-sticky-table__td">
                                      {{req.status}}
                                    </div>
                                    <div class="oh-sticky-table__td">
                                      {{req.description}}
                                    </div>  
                                    <div class="oh-sticky-table__td">            
                                        <button
                                            type="button"
                                            onclick="$('#requestCard{{ req.id }} [name=amount]').attr('required',false);reimbursementConfirm('Do You really want to cancel the request?','#requestCard{{ req.id }}');$('#requestCard{{ req.id }} [name=status]').val('canceled')"
                                            class="oh-btn oh-btn--primary oh-btn--block w-100"
                                        >
                                            <ion-icon name="close" class="mr-1"></ion-icon>
                                            {% trans 'Cancel' %}
                                        </button> 
                                    </div>   

                                    <div class="oh-sticky-table__td">
                                        <input type="hidden" name="ids" value="{{ req.id }}" />
                                        <input type="hidden" name="status" />
                                        <div class="oh-btn-group">
                                            
                                            {% if req.status != "approved" %}
                                            <button
                                                type="button"
                                                onclick="reimbursementConfirm('Do You really want to approve the request?','#requestCard{{ req.id }}',true);$('#requestCard{{ req.id }} [name=status]').val('approved')"
                                                class="oh-btn oh-btn--secondary oh-btn--block w-100"
                                            >
                                                <ion-icon
                                                    name="checkmark"
                                                    class="mr-1"
                                                ></ion-icon>
                                                {% trans 'Approve' %}
                                            </button>
                                            {% else %}
                                            <button
                                                type="button"
                                                class="oh-btn oh-btn--secondary oh-btn--disabled oh-btn--block w-100"
                                            >
                                                <ion-icon
                                                    name="checkmark"
                                                    class="mr-1"
                                                ></ion-icon>
                                                {% trans 'Approved' %}
                                            </button>
                                            {% endif %}
                                        </div>
                                        <input
                                            type="submit"
                                            hidden
                                            id="requestCard{{ req.id }}Button"
                                        />
                                    </div>
                                    <div class="oh-sticky-table__td">
                                        <div class="oh-btn-group">
                                            {% if perms.attendance.change_attendance or request.user %}
                                                <a
                                                    onclick="event.stopPropagation()"
                                                    hx-get="{% url 'create-reimbursement' %}?instance_id={{ req.id }}"
                                                    hx-target="#reimbursementModalBody"
                                                    data-toggle="oh-modal-toggle"
                                                    data-target="#reimbursementModal"
                                                    class="oh-btn oh-btn--light-bkg w-50"
                                                    title="{% trans 'Edit' %}"
                                                  >
                                                  <ion-icon name="create-outline"></ion-icon>
                                                </a>
                                            {% endif %} 
                                            {% if perms.attendance.delete_attendance %}
                                                <a href="{% url "delete-reimbursement" %}?ids={{req.id}}" onclick="return confirm('Do you want to delete this record?')" 
                                                     class='w-50 oh-btn oh-btn--danger-outline oh-btn--light-bkg'> 
                                                    
                                                    <ion-icon name="trash-outline"></ion-icon>
                                                </a>
                                            {% endif %}
                                        </div>
                                    </div> 
                                </form>
                            {% endfor %}
                        </div>
                    </div>
                </div>



                <div class="oh-wrapper w-100">
                    <div class="oh-pagination">
                        <span
                            class="oh-pagination__page"
                            data-toggle="modal"
                            data-target="#addEmployeeModal"
                            >{% trans 'Page'  %} {{ requests.number }} {% trans 'of' %} {{ requests.paginator.num_pages }}.</span
                        >

                        <nav class="oh-pagination__nav">
                            <div class="oh-pagination__input-container me-3">
                                <span class="oh-pagination__label me-1"
                                    >{% trans 'Page' %}</span
                                >

                                <input
                                    type="number"
                                    name="page"
                                    class="oh-pagination__input"
                                    value="{{ requests.number }}"
                                    hx-get="{% url 'search-reimbursement' %}?{{ pd }}"
                                    hx-target="#reimbursementContainer"
                                    min="1"
                                />
                                <span class="oh-pagination__label"
                                    >{% trans 'of' %} {{ requests.paginator.num_pages }}</span
                                >
                            </div>

                            <ul class="oh-pagination__items">
                                {% if requests.has_previous %}
                                <li
                                    class="oh-pagination__item oh-pagination__item--wide"
                                >
                                    <a
                                        hx-target="#reimbursementContainer"
                                        hx-get="{% url 'search-reimbursement' %}?{{ pd }}&page=1"
                                        class="oh-pagination__link"
                                        >{% trans 'First' %}</a
                                    >
                                </li>
                                <li
                                    class="oh-pagination__item oh-pagination__item--wide"
                                >
                                    <a
                                        hx-target="#reimbursementContainer"
                                        hx-get="{% url 'search-reimbursement' %}?{{ pd }}&rpage={{ requests.previous_page_number }}"
                                        class="oh-pagination__link"
                                        >{% trans 'Previous' %}</a
                                    >
                                </li>
                                {% endif %} {% if requests.has_next %}
                                <li
                                    class="oh-pagination__item oh-pagination__item--wide"
                                >
                                    <a
                                        hx-target="#reimbursementContainer"
                                        hx-get="{% url 'search-reimbursement' %}?{{ pd }}&rpage={{ requests.next_page_number }}"
                                        class="oh-pagination__link"
                                        >{% trans 'Next' %}</a
                                    >
                                </li>
                                <li
                                    class="oh-pagination__item oh-pagination__item--wide"
                                >
                                    <a
                                        hx-target="#reimbursementContainer"
                                        hx-get="{% url 'search-reimbursement' %}?{{ pd }}&page={{ requests.paginator.num_pages }}"
                                        class="oh-pagination__link"
                                        >{% trans 'Last' %}</a
                                    >
                                </li>
                                {% endif %}
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>

        
        <div class="oh-tabs__contents">
            <!--  Leave Encashments-->
            <div class="oh-tabs__content" id="leave_encashment_tab">
                <div class="oh-sticky-table">
                    <div class="oh-sticky-table__table oh-table--sortable">
                        <div class="oh-sticky-table__thead">
                            <div class="oh-sticky-table__tr">
                                {% comment %} <div class="oh-sticky-table__th" style="width: 20px">
                                    <input
                                      type="checkbox"
                                      title='{% trans "Select All" %}'
                                      class="oh-input oh-input__checkbox mt-1 mr-2 all-attendances"
                                      style="margin-left: -5px"
                                    />
                                </div> {% endcomment %}
                                <div
                                  class="oh-sticky-table__th"
                                  hx-get=""
                                  hx-target="#tab_contents"
                                  >
                                  {% trans "Employee" %}
                                </div>
                                <div
                                  class="oh-sticky-table__th "
                                  hx-get=""
                                  hx-target="#tab_contents"
                                  >
                                  {% trans "Date" %}
                                </div>
                                <div class="oh-sticky-table__th">{% trans "title" %}</div>
                                <div class="oh-sticky-table__th">{% trans "Amount" %}</div>
                                <div class="oh-sticky-table__th">{% trans "Leave type" %}</div>
                                <div class="oh-sticky-table__th">{% trans "Available days to encash" %}</div>
                                <div class="oh-sticky-table__th">{% trans "carryforward to encash" %}</div>
                                <div class="oh-sticky-table__th">{% trans "Status" %}</div>
                                <div
                                  class="oh-sticky-table__th" style="width:200px"
                                  hx-get=""
                                  hx-target="#tab_contents"
                                  >
                                  {% trans "description" %}
                                </div>
                                
                                <div class="oh-sticky-table__th"></div>
                                <div class="oh-sticky-table__th"></div>
                                <div class="oh-sticky-table__th"> {% trans "Actions" %} </div>
                            </div>
                        </div>
                        <div class="oh-sticky-table__tbody"> 
                        {% for req in leave_encashments %}
                        <form
                            action="{% url 'approve-reimbursements' %}"
                            class="oh-sticky-table__tr"
                            id="requestCard{{ req.id }}"
                        >
                            {% comment %} <div class="oh-sticky-table__sd" onclick="event.stopPropagation();">
                                <input
                                type="checkbox"
                                id="{{attendance.id}}"
                                class="oh-input attendance-checkbox oh-input__checkbox mt-2 mr-2 all-attendance-row"
                                />
                            </div> {% endcomment %}
                            <div class="oh-sticky-table__sd">
                                <div class="d-flex">
                                    <div class="oh-profile oh-profile--md">
                                        <div class="oh-profile__avatar mr-1">
                                            <img
                                                src="{{req.employee_id.get_avatar}}"
                                                class="oh-profile__image"
                                                alt=""
                                            />
                                        </div>
                                        <span class="oh-profile__name oh-text--dark">{{req.employee_id}}</span>
                                    </div>
                                </div>
                            </div>
                            <div class="oh-sticky-table__td dateformat_changer">{{req.created_at|date:"F j, Y"}}</div>
                            <div class="oh-sticky-table__td">
                                {{req.title|truncatechars:20 }}
                            </div>
                            <div class="oh-sticky-table__td">
                                <input type="number" required
                                default="0" min="0" placeholder="Amount"
                                name="amount" class="w-50"{% if req.status == "approved" %}disabled{% endif %} {% if req.amount %}
                                value="{{req.amount}}"{% endif %} />
                            </div>
                            <div class="oh-sticky-table__td">
                                {{req.leave_type_id}}
                            </div>
                            <div class="oh-sticky-table__td">
                                {{req.ad_to_encash}}
                            </div>
                            <div class="oh-sticky-table__td">
                                {{req.cfd_to_encash}}
                            </div>
                            <div class="oh-sticky-table__td">
                                {{req.status}}
                            </div>
                            <div class="oh-sticky-table__td">
                                {{req.description}}
                            </div>  
                            <div class="oh-sticky-table__td">            
                                <button
                                    type="button"
                                    onclick="$('#requestCard{{ req.id }} [name=amount]').attr('required',false);reimbursementConfirm('Do You really want to cancel the request?','#requestCard{{ req.id }}');$('#requestCard{{ req.id }} [name=status]').val('canceled')"
                                    class="oh-btn oh-btn--primary oh-btn--block w-100"
                                >
                                    <ion-icon name="close" class="mr-1"></ion-icon>
                                    {% trans 'Cancel' %}
                                </button> 
                            </div>   

                            <div class="oh-sticky-table__td">
                                <input type="hidden" name="ids" value="{{ req.id }}" />
                                <input type="hidden" name="status" />
                                <div class="oh-btn-group">
                                    
                                    {% if req.status != "approved" %}
                                    <button
                                        type="button"
                                        onclick="reimbursementConfirm('Do You really want to approve the request?','#requestCard{{ req.id }}',true);$('#requestCard{{ req.id }} [name=status]').val('approved')"
                                        class="oh-btn oh-btn--secondary oh-btn--block w-100"
                                    >
                                        <ion-icon
                                            name="checkmark"
                                            class="mr-1"
                                        ></ion-icon>
                                        {% trans 'Approve' %}
                                    </button>
                                    {% else %}
                                    <button
                                        type="button"
                                        class="oh-btn oh-btn--secondary oh-btn--disabled oh-btn--block w-100"
                                    >
                                        <ion-icon
                                            name="checkmark"
                                            class="mr-1"
                                        ></ion-icon>
                                        {% trans 'Approved' %}
                                    </button>
                                    {% endif %}
                                </div>
                                <input
                                    type="submit"
                                    hidden
                                    id="requestCard{{ req.id }}Button"
                                />
                            </div>
                            <div class="oh-sticky-table__td">
                                <div class="oh-btn-group">
                                    {% if perms.attendance.change_attendance or request.user %}
                                        <a
                                            onclick="event.stopPropagation()"
                                            hx-get="{% url 'create-reimbursement' %}?instance_id={{ req.id }}"
                                            hx-target="#reimbursementModalBody"
                                            data-toggle="oh-modal-toggle"
                                            data-target="#reimbursementModal"
                                            class="oh-btn oh-btn--light-bkg w-50"
                                            title="{% trans 'Edit' %}"
                                            >
                                            <ion-icon name="create-outline"></ion-icon>
                                        </a>
                                    {% endif %} 
                                    {% if perms.attendance.delete_attendance %}
                                        <a href="{% url "delete-reimbursement" %}?ids={{req.id}}" onclick="return confirm('Do you want to delete this record?')" 
                                        class='w-50 oh-btn oh-btn--danger-outline oh-btn--light-bkg'> 
                                            
                                            <ion-icon name="trash-outline"></ion-icon>
                                        </a>
                                    {% endif %}
                                </div>
                            </div> 
                        </form>
                    {% endfor %}
                    </div>
                </div>
            </div>


            <div class="oh-wrapper w-100">
                <div class="oh-pagination">
                    <span
                        class="oh-pagination__page"
                        data-toggle="modal"
                        data-target="#addEmployeeModal"
                        >{% trans 'Page' %} {{ requests.number }} {% trans 'of' %} 
                        {{ requests.paginator.num_pages }}.</span
                    >

                    <nav class="oh-pagination__nav">
                        <div class="oh-pagination__input-container me-3">
                            <span class="oh-pagination__label me-1"
                                >{% trans 'Page' %}</span
                            >

                            <input
                                type="number"
                                name="page"
                                class="oh-pagination__input"
                                value="{{ requests.number }}"
                                hx-get="{% url 'search-reimbursement' %}?{{ pd }}"
                                hx-target="#reimbursementContainer"
                                min="1"
                            />
                            <span class="oh-pagination__label"
                                >{% trans 'of' %} {{ requests.paginator.num_pages }}</span
                            >
                        </div>

                        <ul class="oh-pagination__items">
                            {% if requests.has_previous %}
                            <li
                                class="oh-pagination__item oh-pagination__item--wide"
                            >
                                <a
                                    hx-target="#reimbursementContainer"
                                    hx-get="{% url 'search-reimbursement' %}?{{ pd }}&page=1"
                                    class="oh-pagination__link"
                                    >{% trans 'First' %}</a
                                >
                            </li>
                            <li
                                class="oh-pagination__item oh-pagination__item--wide"
                            >
                                <a
                                    hx-target="#reimbursementContainer"
                                    hx-get="{% url 'search-reimbursement' %}?{{ pd }}&lpage={{ requests.previous_page_number }}"
                                    class="oh-pagination__link"
                                    >{% trans 'Previous' %}</a
                                >
                            </li>
                            {% endif %} {% if requests.has_next %}
                            <li
                                class="oh-pagination__item oh-pagination__item--wide"
                            >
                                <a
                                    hx-target="#reimbursementContainer"
                                    hx-get="{% url 'search-reimbursement' %}?{{ pd }}&lpage={{ requests.next_page_number }}"
                                    class="oh-pagination__link"
                                    >{% trans 'Next' %}</a
                                >
                            </li>
                            <li
                                class="oh-pagination__item oh-pagination__item--wide"
                            >
                                <a
                                    hx-target="#reimbursementContainer"
                                    hx-get="{% url 'search-reimbursement' %}?{{ pd }}&page={{ requests.paginator.num_pages }}"
                                    class="oh-pagination__link"
                                    >{% trans 'Last' %}</a
                                >
                            </li>
                            {% endif %}
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        
        <div class="oh-tabs__contents">
            <!-- Bonus Encashments-->
            <div class="oh-tabs__content" id="bonus_encashment_tab">
                <div class="oh-sticky-table">
                    <div class="oh-sticky-table__table oh-table--sortable">
                        <div class="oh-sticky-table__thead">
                            <div class="oh-sticky-table__tr">
                                {% comment %} <div class="oh-sticky-table__th" style="width: 20px">
                                    <input
                                      type="checkbox"
                                      title='{% trans "Select All" %}'
                                      class="oh-input oh-input__checkbox mt-1 mr-2 all-attendances"
                                      style="margin-left: -5px"
                                    />
                                </div> {% endcomment %}
                                <div
                                  class="oh-sticky-table__th"
                                  hx-get=""
                                  hx-target="#tab_contents"
                                  >
                                  {% trans "Employee" %}
                                </div>
                                <div
                                  class="oh-sticky-table__th "
                                  hx-get=""
                                  hx-target="#tab_contents"
                                  >
                                  {% trans "Date" %}
                                </div>
                                <div class="oh-sticky-table__th">{% trans "title" %}</div>
                                <div class="oh-sticky-table__th">{% trans "Amount" %}</div>
                                <div class="oh-sticky-table__th">{% trans "Bonus to encash" %}</div>
                                <div class="oh-sticky-table__th">{% trans "Status" %}</div>
                                <div
                                  class="oh-sticky-table__th" style="width:200px"
                                  hx-get=""
                                  hx-target="#tab_contents"
                                  >
                                  {% trans "description" %}
                                </div>
                                
                                <div class="oh-sticky-table__th"></div>
                                <div class="oh-sticky-table__th"></div>
                                <div class="oh-sticky-table__th"> {% trans "Actions" %} </div>
                            </div>
                        </div>
                        <div class="oh-sticky-table__tbody">
                        {% for req in bonus_encashments %}
                            <form
                                action="{% url 'approve-reimbursements' %}"
                                class="oh-sticky-table__tr"
                                id="requestCard{{ req.id }}"
                            >
                                {% comment %} <div class="oh-sticky-table__sd" onclick="event.stopPropagation();">
                                    <input
                                    type="checkbox"
                                    id="{{attendance.id}}"
                                    class="oh-input attendance-checkbox oh-input__checkbox mt-2 mr-2 all-attendance-row"
                                    />
                                </div> {% endcomment %}
                                <div class="oh-sticky-table__sd">
                                    <div class="d-flex">
                                        <div class="oh-profile oh-profile--md">
                                            <div class="oh-profile__avatar mr-1">
                                                <img
                                                    src="{{req.employee_id.get_avatar}}"
                                                    class="oh-profile__image"
                                                    alt=""
                                                />
                                            </div>
                                            <span class="oh-profile__name oh-text--dark">{{req.employee_id}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="oh-sticky-table__td dateformat_changer">{{req.created_at|date:"F j, Y"}}</div>
                                <div class="oh-sticky-table__td">
                                    {{req.title|truncatechars:20 }}
                                </div>
                                <div class="oh-sticky-table__td">
                                    <input type="number" required
                                    default="0" min="0" placeholder="Amount"
                                    name="amount" class="w-50"{% if req.status == "approved" %}disabled{% endif %} {% if req.amount %}
                                    value="{{req.amount}}"{% endif %} />
                                </div>
                                <div class="oh-sticky-table__td">
                                    {{req.bonus_to_encash}}
                                </div>
                                <div class="oh-sticky-table__td">
                                    {{req.status}}
                                </div>
                                <div class="oh-sticky-table__td">
                                    {{req.description}}
                                </div>  
                                <div class="oh-sticky-table__td">            
                                    <button
                                        type="button"
                                        onclick="$('#requestCard{{ req.id }} [name=amount]').attr('required',false);reimbursementConfirm('Do You really want to cancel the request?','#requestCard{{ req.id }}');$('#requestCard{{ req.id }} [name=status]').val('canceled')"
                                        class="oh-btn oh-btn--primary oh-btn--block w-100"
                                    >
                                        <ion-icon name="close" class="mr-1"></ion-icon>
                                        {% trans 'Cancel' %}
                                    </button> 
                                </div>   

                                <div class="oh-sticky-table__td">
                                    <input type="hidden" name="ids" value="{{ req.id }}" />
                                    <input type="hidden" name="status" />
                                    <div class="oh-btn-group">
                                        
                                        {% if req.status != "approved" %}
                                        <button
                                            type="button"
                                            onclick="reimbursementConfirm('Do You really want to approve the request?','#requestCard{{ req.id }}',true);$('#requestCard{{ req.id }} [name=status]').val('approved')"
                                            class="oh-btn oh-btn--secondary oh-btn--block w-100"
                                        >
                                            <ion-icon
                                                name="checkmark"
                                                class="mr-1"
                                            ></ion-icon>
                                            {% trans 'Approve' %}
                                        </button>
                                        {% else %}
                                        <button
                                            type="button"
                                            class="oh-btn oh-btn--secondary oh-btn--disabled oh-btn--block w-100"
                                        >
                                            <ion-icon
                                                name="checkmark"
                                                class="mr-1"
                                            ></ion-icon>
                                            {% trans 'Approved' %}
                                        </button>
                                        {% endif %}
                                    </div>
                                    <input
                                        type="submit"
                                        hidden
                                        id="requestCard{{ req.id }}Button"
                                    />
                                </div>
                                <div class="oh-sticky-table__td">
                                    <div class="oh-btn-group">
                                        {% if perms.attendance.change_attendance or request.user %}
                                            <a
                                                hx-get="{% url 'create-reimbursement' %}?instance_id={{ req.id }}"
                                                hx-target="#reimbursementModalBody"
                                                data-toggle="oh-modal-toggle"
                                                data-target="#reimbursementModal"
                                                class="oh-btn oh-btn--light-bkg w-50"
                                                title="{% trans 'Edit' %}"
                                                >
                                                <ion-icon name="create-outline"></ion-icon>
                                            </a>
                                        {% endif %} 
                                        {% if perms.attendance.delete_attendance %}
                                            <a href="{% url "delete-reimbursement" %}?ids={{req.id}}" onclick="return confirm('Do you want to delete this record?')" 
                                            class='w-50 oh-btn oh-btn--danger-outline oh-btn--light-bkg'> 
                                                <ion-icon name="trash-outline"></ion-icon>
                                            </a>
                                        {% endif %}
                                    </div>
                                </div> 
                            </form>
                        {% endfor %}
                        </div>
                </div>
            </div>

            <div class="oh-wrapper w-100">
                <div class="oh-pagination">
                    <span
                        class="oh-pagination__page"
                        data-toggle="modal"
                        data-target="#addEmployeeModal"
                        >{% trans 'Page' %} {{ requests.number }} {% trans 'of' %} {{ requests.paginator.num_pages }}.</span
                    >

                    <nav class="oh-pagination__nav">
                        <div class="oh-pagination__input-container me-3">
                            <span class="oh-pagination__label me-1"
                                >{% trans 'Page' %}</span
                            >

                            <input
                                type="number"
                                name="page"
                                class="oh-pagination__input"
                                value="{{ requests.number }}"
                                hx-get="{% url 'search-reimbursement' %}?{{ pd }}"
                                hx-target="#reimbursementContainer"
                                min="1"
                            />
                            <span class="oh-pagination__label"
                                >{% trans 'of' %} {{ requests.paginator.num_pages }}</span
                            >
                        </div>

                        <ul class="oh-pagination__items">
                            {% if requests.has_previous %}
                            <li
                                class="oh-pagination__item oh-pagination__item--wide"
                            >
                                <a
                                    hx-target="#reimbursementContainer"
                                    hx-get="{% url 'search-reimbursement' %}?{{ pd }}&page=1"
                                    class="oh-pagination__link"
                                    >{% trans 'First' %}</a
                                >
                            </li>
                            <li
                                class="oh-pagination__item oh-pagination__item--wide"
                            >
                                <a
                                    hx-target="#reimbursementContainer"
                                    hx-get="{% url 'search-reimbursement' %}?{{ pd }}&page={{ requests.previous_page_number }}"
                                    class="oh-pagination__link"
                                    >{% trans 'Previous' %}</a
                                >
                            </li>
                            {% endif %} {% if requests.has_next %}
                            <li
                                class="oh-pagination__item oh-pagination__item--wide"
                            >
                                <a
                                    hx-target="#reimbursementContainer"
                                    hx-get="{% url 'search-reimbursement' %}?{{ pd }}&bpage={{ requests.next_page_number }}"
                                    class="oh-pagination__link"
                                    >{% trans 'Next' %}</a
                                >
                            </li>
                            <li
                                class="oh-pagination__item oh-pagination__item--wide"
                            >
                                <a
                                    hx-target="#reimbursementContainer"
                                    hx-get="{% url 'search-reimbursement' %}?{{ pd }}&bpage={{ requests.paginator.num_pages }}"
                                    class="oh-pagination__link"
                                    >{% trans 'Last' %}</a
                                >
                            </li>
                            {% endif %}
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- start of comment modal -->
    <div
        class="oh-modal"
        id="shiftcommentModal"
        role="dialog"
        aria-labelledby="emptagModal"
        aria-hidden="true"
    >
        <div class="oh-modal__dialog">
            <div class="oh-modal__dialog-header">
                <h2 class="oh-modal__dialog-title" id="createModalTitle">
                    {% trans "Add Comment" %}
                </h2>
                <button class="oh-modal__close" aria-label="Close">
                    <ion-icon name="close-outline"></ion-icon>
                </button>
            </div>
            <div
                class="oh-modal__dialog-body"
                id="shiftRequestCommentForm"
            ></div>
        </div>
    </div>
    <!-- end of comment modal -->

    <div
        class="oh-modal"
        style="z-index: 60"
        id="shiftRequestDetailModal"
        role="dialog"
        aria-labelledby="shiftRequestDetailModal"
        aria-hidden="true"
    >
        <div class="oh-modal__dialog">
            <div class="oh-modal__dialog-header">
                <h2 class="oh-modal__dialog-title" id="">
                    {% trans "Details" %}
                </h2>
                <button class="oh-modal__close" aria-label="Close">
                    <ion-icon name="close-outline"></ion-icon>
                </button>
            </div>
            <div
                class="oh-modal__dialog-body oh-modal__dialog-relative"
                id="shiftRequestDetailTarget"
            ></div>
        </div>
    </div>

    <script>
        function reimbursementConfirm(params, target, approve = false) {
            Swal.fire({
                text: params,
                icon: "question",
                showCancelButton: true,
                confirmButtonColor: "#008000",
                cancelButtonColor: "#d33",
                confirmButtonText: "Confirm",
                cancelButtonText: "Close",
            }).then((result) => {
                if (result.isConfirmed) {
                    if (approve) {
                        $(`${target} [name=amount]`).attr("required", true);
                    }
                    $(target + "Button").click();
                    if (event.target.tagName.toLowerCase() === "form") {
                        event.target.submit();
                    } else if (event.target.tagName.toLowerCase() === "a") {
                        window.location.href = event.target.href;
                    }
                } else {
                }
            });
        }
        $(document).ready(function () {
            var activeTab = localStorage.getItem("activeTabReimbursment");
            if (activeTab != null) {
                var tab = $(`[data-target="${activeTab}"]`);
                var tabContent = $(activeTab);
                $(tab).addClass( "oh-tabs__tab--active");
                $(tabContent).addClass( "oh-tabs__content--active");
            } else {
                $('[data-target="#reimbursement_tab"]').attr(
                    "class",
                    "oh-tabs__tab oh-tabs__tab--active"
                );
                $("#reimbursement_tab").attr("class", "oh-tabs__content oh-tabs__content--active");
            }

            $(".oh-tabs__tab").click(function (e) {
                var activeTab = $(this).attr("data-target");
                $(".oh-tabs__content--active").toggleClass('oh-tabs__content--active');
                $(".oh-tabs__tab--active").toggleClass('oh-tabs__tab--active');
                $(`[data-target="${activeTab}"]`).toggleClass("oh-tabs__tab--active");
                $(activeTab).toggleClass("oh-tabs__content--active");
                localStorage.setItem("activeTabReimbursment", activeTab);
            });
        });
    </script>      
</div>
