{% extends 'settings.html' %} {% load i18n %} {% block settings %}

<div class="oh-inner-sidebar-content mb-4">
	{% if condition %}
	<div class="oh-sticky-table">
		<div class="oh-sticky-table__table oh-table--sortable">
			<div class="oh-sticky-table__thead">
				<div class="oh-sticky-table__tr">
					<div class="oh-sticky-table__th">
						{% trans "Auto Validate Till" %}
					</div>
					<div class="oh-sticky-table__th">
						{% trans "Min Hour To Approve OT" %}
					</div>
					<div class="oh-sticky-table__th">{% trans "OT Cut-Off/Day" %}</div>
					<div class="oh-sticky-table__th"></div>
				</div>
			</div>
			<div class="oh-sticky-table__tbody">
				{% if condition != None %}
				<div class="oh-sticky-table__tr" draggable="true">
					<div class="oh-sticky-table__td">
						{{condition.validation_at_work}}
					</div>
					<div class="oh-sticky-table__td">
						{{condition.minimum_overtime_to_approve}}
					</div>
					<div class="oh-sticky-table__td">{{condition.overtime_cutoff}}</div>
					<div class="oh-sticky-table__td">
						<a
							hx-get="{% url 'attendance-settings-update' condition.id %}"
							hx-target="#updateForm"
							type="button"
							class="oh-btn oh-btn--info"
						>
							{% trans "Edit" %}</a
						>
					</div>
				</div>
				{% endif %}
			</div>
		</div>
	</div>
	{% else %} 
	<form action="" method="post" class="settings-label mb-1">
		{% csrf_token %}
		<div class="oh-inner-sidebar-content__header">
			<h2 class="oh-inner-sidebar-content__title">
				{% trans "Attendance Condition" %}
			</h2>
		</div>
		<div class="oh-inner-sidebar-content__body">
			<div class="oh-input-group">{{form}}</div>
		</div>
		<button
			type="submit"
			class="oh-btn oh-btn--secondary mt-2 mr-0 oh-btn--w-100-resp"
		>
			{% trans "Save Changes" %}
		</button>
		<div class="oh-inner-sidebar-content__footer"></div>
	</form>
	{% endif%}
</div>

<div class="oh-inner-sidebar-content" id="updateForm"></div>
{% endblock settings %}
